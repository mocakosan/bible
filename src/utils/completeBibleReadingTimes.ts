// src/utils/completeBibleReadingTimes.ts
// 성경 전체 읽기 시간 데이터 (초 단위) - 수정된 버전

/**
 * 구약 성경 읽기 시간 (초 단위)
 * 창세기부터 말라기까지
 */
const OLD_TESTAMENT_READING_TIMES: { [key: number]: { [key: number]: number } } = {
    // 1. 창세기 (50장)
    1: {
        1: 270, 2: 210, 3: 240, 4: 240, 5: 180, 6: 210, 7: 240, 8: 210, 9: 210, 10: 180,
        11: 180, 12: 180, 13: 150, 14: 210, 15: 180, 16: 150, 17: 210, 18: 240, 19: 270, 20: 150,
        21: 240, 22: 210, 23: 150, 24: 420, 25: 240, 26: 240, 27: 330, 28: 180, 29: 270, 30: 300,
        31: 360, 32: 240, 33: 150, 34: 210, 35: 210, 36: 270, 37: 270, 38: 240, 39: 210, 40: 210,
        41: 360, 42: 270, 43: 240, 44: 240, 45: 240, 46: 240, 47: 270, 48: 180, 49: 240, 50: 240
    },

    // 2. 출애굽기 (40장)
    2: {
        1: 210, 2: 210, 3: 210, 4: 240, 5: 210, 6: 240, 7: 210, 8: 240, 9: 270, 10: 240,
        11: 120, 12: 330, 13: 180, 14: 270, 15: 210, 16: 270, 17: 150, 18: 210, 19: 210, 20: 210,
        21: 270, 22: 240, 23: 240, 24: 150, 25: 300, 26: 270, 27: 180, 28: 300, 29: 330, 30: 270,
        31: 150, 32: 270, 33: 210, 34: 270, 35: 270, 36: 270, 37: 240, 38: 240, 39: 330, 40: 270
    },

    // 3. 레위기 (27장)
    3: {
        1: 150, 2: 150, 3: 150, 4: 270, 5: 180, 6: 240, 7: 270, 8: 270, 9: 210, 10: 180,
        11: 330, 12: 90, 13: 390, 14: 360, 15: 240, 16: 270, 17: 150, 18: 240, 19: 270, 20: 210,
        21: 210, 22: 240, 23: 300, 24: 210, 25: 360, 26: 330, 27: 270
    },

    // 4. 민수기 (36장)
    4: {
        1: 360, 2: 240, 3: 330, 4: 330, 5: 240, 6: 210, 7: 510, 8: 210, 9: 210, 10: 270,
        11: 270, 12: 150, 13: 240, 14: 330, 15: 300, 16: 330, 17: 120, 18: 240, 19: 180, 20: 240,
        21: 270, 22: 300, 23: 240, 24: 210, 25: 150, 26: 420, 27: 210, 28: 240, 29: 270, 30: 150,
        31: 360, 32: 300, 33: 360, 34: 240, 35: 270, 36: 120
    },

    // 5. 신명기 (34장)
    5: {
        1: 330, 2: 270, 3: 240, 4: 330, 5: 240, 6: 210, 7: 210, 8: 180, 9: 240, 10: 180,
        11: 240, 12: 240, 13: 150, 14: 240, 15: 180, 16: 180, 17: 180, 18: 180, 19: 180, 20: 180,
        21: 180, 22: 240, 23: 210, 24: 180, 25: 150, 26: 150, 27: 210, 28: 450, 29: 240, 30: 180,
        31: 240, 32: 360, 33: 240, 34: 120
    },

    // 6. 여호수아 (24장)
    6: {
        1: 150, 2: 210, 3: 150, 4: 210, 5: 120, 6: 210, 7: 210, 8: 270, 9: 210, 10: 300,
        11: 180, 12: 210, 13: 240, 14: 120, 15: 390, 16: 90, 17: 150, 18: 240, 19: 330, 20: 90,
        21: 300, 22: 270, 23: 150, 24: 240
    },

    // 7. 사사기 (21장)
    7: {
        1: 270, 2: 210, 3: 240, 4: 210, 5: 240, 6: 300, 7: 210, 8: 270, 9: 360, 10: 150,
        11: 300, 12: 120, 13: 210, 14: 180, 15: 180, 16: 240, 17: 120, 18: 240, 19: 240, 20: 330,
        21: 210
    },

    // 8. 룻기 (4장)
    8: { 1: 180, 2: 210, 3: 150, 4: 180 },

    // 9. 사무엘상 (31장)
    9: {
        1: 240, 2: 270, 3: 180, 4: 180, 5: 120, 6: 180, 7: 150, 8: 180, 9: 240, 10: 240,
        11: 120, 12: 210, 13: 210, 14: 330, 15: 270, 16: 210, 17: 390, 18: 240, 19: 210, 20: 300,
        21: 120, 22: 210, 23: 240, 24: 180, 25: 330, 26: 210, 27: 120, 28: 210, 29: 90, 30: 240,
        31: 120
    },

    // 10. 사무엘하 (24장)
    10: {
        1: 240, 2: 240, 3: 300, 4: 120, 5: 210, 6: 210, 7: 240, 8: 150, 9: 120, 10: 150,
        11: 240, 12: 240, 13: 300, 14: 270, 15: 270, 16: 210, 17: 240, 18: 270, 19: 330, 20: 210,
        21: 180, 22: 330, 23: 300, 24: 210
    },

    // 11. 열왕기상 (22장)
    11: {
        1: 360, 2: 330, 3: 240, 4: 270, 5: 150, 6: 270, 7: 330, 8: 420, 9: 240, 10: 240,
        11: 300, 12: 240, 13: 270, 14: 240, 15: 270, 16: 270, 17: 210, 18: 330, 19: 180, 20: 300,
        21: 240, 22: 360
    },

    // 12. 열왕기하 (25장)
    12: {
        1: 150, 2: 210, 3: 240, 4: 330, 5: 240, 6: 270, 7: 180, 8: 240, 9: 300, 10: 270,
        11: 180, 12: 180, 13: 210, 14: 240, 15: 300, 16: 180, 17: 300, 18: 300, 19: 300, 20: 180,
        21: 210, 22: 180, 23: 300, 24: 180, 25: 240
    },

    // 13. 역대상 (29장)
    13: {
        1: 360, 2: 360, 3: 210, 4: 300, 5: 210, 6: 480, 7: 300, 8: 300, 9: 330, 10: 120,
        11: 330, 12: 300, 13: 120, 14: 150, 15: 240, 16: 300, 17: 240, 18: 150, 19: 150, 20: 90,
        21: 240, 22: 150, 23: 240, 24: 240, 25: 240, 26: 240, 27: 270, 28: 180, 29: 240
    },

    // 14. 역대하 (36장)
    14: {
        1: 150, 2: 150, 3: 150, 4: 210, 5: 120, 6: 330, 7: 210, 8: 150, 9: 240, 10: 150,
        11: 210, 12: 150, 13: 180, 14: 120, 15: 150, 16: 120, 17: 150, 18: 270, 19: 120, 20: 300,
        21: 180, 22: 120, 23: 180, 24: 240, 25: 240, 26: 210, 27: 90, 28: 240, 29: 270, 30: 240,
        31: 180, 32: 270, 33: 210, 34: 270, 35: 240, 36: 210
    },

    // 15. 에스라 (10장)
    15: { 1: 120, 2: 420, 3: 120, 4: 210, 5: 150, 6: 180, 7: 240, 8: 270, 9: 120, 10: 330 },

    // 16. 느헤미야 (13장)
    16: {
        1: 120, 2: 180, 3: 240, 4: 210, 5: 150, 6: 150, 7: 420, 8: 150, 9: 300, 10: 300,
        11: 270, 12: 330, 13: 240
    },

    // 17. 에스더 (10장)
    17: { 1: 180, 2: 210, 3: 120, 4: 150, 5: 120, 6: 120, 7: 90, 8: 150, 9: 240, 10: 30 },

    // 18. 욥기 (42장)
    18: {
        1: 180, 2: 120, 3: 210, 4: 180, 5: 240, 6: 240, 7: 180, 8: 180, 9: 270, 10: 180,
        11: 180, 12: 210, 13: 240, 14: 180, 15: 270, 16: 180, 17: 120, 18: 180, 19: 240, 20: 240,
        21: 270, 22: 240, 23: 150, 24: 210, 25: 60, 26: 120, 27: 210, 28: 240, 29: 210, 30: 240,
        31: 300, 32: 180, 33: 270, 34: 270, 35: 120, 36: 270, 37: 210, 38: 300, 39: 240, 40: 210,
        41: 270, 42: 150
    },

    // 19. 시편 (150편)
    19: {
        1: 90, 2: 120, 3: 90, 4: 90, 5: 120, 6: 90, 7: 150, 8: 90, 9: 180, 10: 150,
        11: 60, 12: 90, 13: 60, 14: 60, 15: 60, 16: 120, 17: 150, 18: 360, 19: 120, 20: 90,
        21: 120, 22: 240, 23: 60, 24: 90, 25: 180, 26: 120, 27: 120, 28: 90, 29: 90, 30: 120,
        31: 210, 32: 120, 33: 180, 34: 180, 35: 240, 36: 120, 37: 300, 38: 180, 39: 120, 40: 150,
        41: 120, 42: 120, 43: 60, 44: 210, 45: 150, 46: 90, 47: 90, 48: 120, 49: 180, 50: 180,
        51: 150, 52: 90, 53: 60, 54: 60, 55: 180, 56: 120, 57: 120, 58: 120, 59: 150, 60: 120,
        61: 90, 62: 120, 63: 120, 64: 90, 65: 120, 66: 180, 67: 60, 68: 270, 69: 270, 70: 60,
        71: 210, 72: 180, 73: 240, 74: 180, 75: 90, 76: 120, 77: 180, 78: 420, 79: 120, 80: 150,
        81: 150, 82: 90, 83: 150, 84: 120, 85: 120, 86: 150, 87: 60, 88: 150, 89: 360, 90: 150,
        91: 150, 92: 120, 93: 60, 94: 180, 95: 90, 96: 120, 97: 120, 98: 90, 99: 90, 100: 60,
        101: 90, 102: 240, 103: 180, 104: 270, 105: 330, 106: 330, 107: 300, 108: 120, 109: 240, 110: 60,
        111: 90, 112: 90, 113: 90, 114: 90, 115: 150, 116: 150, 117: 30, 118: 240, 119: 1080, 120: 60,
        121: 90, 122: 90, 123: 30, 124: 90, 125: 60, 126: 60, 127: 60, 128: 60, 129: 90, 130: 90,
        131: 30, 132: 150, 133: 30, 134: 30, 135: 180, 136: 210, 137: 90, 138: 90, 139: 210, 140: 120,
        141: 90, 142: 60, 143: 120, 144: 120, 145: 180, 146: 90, 147: 180, 148: 120, 149: 90, 150: 60
    },

    // 20. 잠언 (31장)
    20: {
        1: 240, 2: 180, 3: 270, 4: 210, 5: 210, 6: 270, 7: 210, 8: 270, 9: 150, 10: 240,
        11: 240, 12: 210, 13: 210, 14: 270, 15: 240, 16: 240, 17: 210, 18: 180, 19: 210, 20: 210,
        21: 240, 22: 210, 23: 270, 24: 270, 25: 210, 26: 210, 27: 210, 28: 210, 29: 210, 30: 240,
        31: 240
    },

    // 21. 전도서 (12장)
    21: {
        1: 150, 2: 210, 3: 180, 4: 150, 5: 180, 6: 120, 7: 240, 8: 150, 9: 150, 10: 180,
        11: 90, 12: 120
    },

    // 22. 아가 (8장)
    22: { 1: 150, 2: 150, 3: 120, 4: 150, 5: 150, 6: 120, 7: 120, 8: 120 },

    // 23. 이사야 (66장)
    23: {
        1: 240, 2: 180, 3: 210, 4: 60, 5: 240, 6: 120, 7: 210, 8: 180, 9: 180, 10: 270,
        11: 150, 12: 60, 13: 180, 14: 240, 15: 90, 16: 120, 17: 120, 18: 60, 19: 210, 20: 60,
        21: 150, 22: 210, 23: 150, 24: 180, 25: 120, 26: 180, 27: 120, 28: 240, 29: 210, 30: 270,
        31: 90, 32: 180, 33: 210, 34: 150, 35: 90, 36: 210, 37: 300, 38: 180, 39: 90, 40: 240,
        41: 240, 42: 210, 43: 240, 44: 240, 45: 210, 46: 120, 47: 120, 48: 180, 49: 210, 50: 120,
        51: 210, 52: 120, 53: 120, 54: 150, 55: 120, 56: 120, 57: 180, 58: 120, 59: 180, 60: 180,
        61: 120, 62: 120, 63: 150, 64: 120, 65: 210, 66: 210
    },

    // 24. 예레미야 (52장)
    24: {
        1: 150, 2: 270, 3: 210, 4: 240, 5: 240, 6: 240, 7: 270, 8: 180, 9: 210, 10: 210,
        11: 210, 12: 150, 13: 240, 14: 180, 15: 180, 16: 180, 17: 240, 18: 210, 19: 120, 20: 150,
        21: 120, 22: 240, 23: 300, 24: 90, 25: 300, 26: 210, 27: 180, 28: 150, 29: 240, 30: 210,
        31: 300, 32: 330, 33: 210, 34: 180, 35: 150, 36: 240, 37: 180, 38: 210, 39: 150, 40: 150,
        41: 150, 42: 180, 43: 120, 44: 240, 45: 30, 46: 240, 47: 60, 48: 330, 49: 300, 50: 330,
        51: 420, 52: 270
    },

    // 25. 예레미야애가 (5장)
    25: { 1: 180, 2: 180, 3: 390, 4: 180, 5: 180 },

    // 26. 에스겔 (48장)
    26: {
        1: 240, 2: 90, 3: 240, 4: 150, 5: 150, 6: 120, 7: 240, 8: 150, 9: 120, 10: 180,
        11: 210, 12: 240, 13: 210, 14: 210, 15: 60, 16: 390, 17: 210, 18: 240, 19: 120, 20: 330,
        21: 240, 22: 240, 23: 330, 24: 240, 25: 150, 26: 180, 27: 270, 28: 210, 29: 180, 30: 210,
        31: 150, 32: 240, 33: 270, 34: 240, 35: 120, 36: 270, 37: 240, 38: 210, 39: 240, 40: 330,
        41: 210, 42: 180, 43: 240, 44: 240, 45: 210, 46: 210, 47: 210, 48: 270
    },

    // 27. 다니엘 (12장)
    27: {
        1: 180, 2: 330, 3: 240, 4: 270, 5: 240, 6: 240, 7: 240, 8: 240, 9: 240, 10: 180,
        11: 330, 12: 120
    },

    // 28. 호세아 (14장)
    28: {
        1: 120, 2: 210, 3: 60, 4: 150, 5: 120, 6: 120, 7: 120, 8: 120, 9: 150, 10: 120,
        11: 120, 12: 120, 13: 150, 14: 90
    },

    // 29. 요엘 (3장)
    29: { 1: 180, 2: 240, 3: 180 },

    // 30. 아모스 (9장)
    30: { 1: 120, 2: 150, 3: 120, 4: 120, 5: 240, 6: 120, 7: 150, 8: 120, 9: 120 },

    // 31. 오바댜 (1장)
    31: { 1: 180 },

    // 32. 요나 (4장)
    32: { 1: 150, 2: 90, 3: 90, 4: 90 },

    // 33. 미가 (7장)
    33: { 1: 150, 2: 120, 3: 120, 4: 120, 5: 120, 6: 150, 7: 180 },

    // 34. 나훔 (3장)
    34: { 1: 120, 2: 120, 3: 150 },

    // 35. 하박국 (3장)
    35: { 1: 120, 2: 180, 3: 150 },

    // 36. 스바냐 (3장)
    36: { 1: 150, 2: 120, 3: 180 },

    // 37. 학개 (2장)
    37: { 1: 120, 2: 210 },

    // 38. 스가랴 (14장)
    38: {
        1: 180, 2: 120, 3: 90, 4: 120, 5: 90, 6: 120, 7: 120, 8: 210, 9: 150, 10: 120,
        11: 150, 12: 120, 13: 90, 14: 180
    },

    // 39. 말라기 (4장)
    39: { 1: 120, 2: 150, 3: 150, 4: 60 }
};

/**
 * 신약 성경 읽기 시간 (초 단위)
 * 마태복음부터 요한계시록까지
 */
const NEW_TESTAMENT_READING_TIMES: { [key: number]: { [key: number]: number } } = {
    // 40. 마태복음 (28장)
    40: {
        1: 210, 2: 210, 3: 150, 4: 210, 5: 360, 6: 270, 7: 240, 8: 270, 9: 300, 10: 300,
        11: 240, 12: 360, 13: 390, 14: 270, 15: 300, 16: 240, 17: 240, 18: 270, 19: 240, 20: 270,
        21: 330, 22: 330, 23: 300, 24: 360, 25: 330, 26: 450, 27: 420, 28: 180
    },

    // 41. 마가복음 (16장)
    41: {
        1: 330, 2: 240, 3: 270, 4: 300, 5: 330, 6: 390, 7: 270, 8: 300, 9: 360, 10: 360,
        11: 270, 12: 330, 13: 270, 14: 450, 15: 330, 16: 180
    },

    // 42. 누가복음 (24장)
    42: {
        1: 480, 2: 360, 3: 300, 4: 330, 5: 300, 6: 360, 7: 360, 8: 390, 9: 390, 10: 330,
        11: 360, 12: 390, 13: 270, 14: 270, 15: 240, 16: 240, 17: 270, 18: 330, 19: 360, 20: 330,
        21: 300, 22: 450, 23: 390, 24: 360
    },

    // 43. 요한복음 (21장)
    43: {
        1: 360, 2: 210, 3: 270, 4: 360, 5: 330, 6: 450, 7: 360, 8: 390, 9: 330, 10: 330,
        11: 390, 12: 360, 13: 300, 14: 240, 15: 240, 16: 270, 17: 210, 18: 330, 19: 330, 20: 240,
        21: 210
    },

    // 44. 사도행전 (28장)
    44: {
        1: 210, 2: 330, 3: 210, 4: 270, 5: 330, 6: 120, 7: 390, 8: 300, 9: 330, 10: 360,
        11: 240, 12: 210, 13: 360, 14: 240, 15: 300, 16: 300, 17: 270, 18: 240, 19: 330, 20: 300,
        21: 300, 22: 240, 23: 270, 24: 210, 25: 210, 26: 240, 27: 330, 28: 240
    },

    // 45. 로마서 (16장)
    45: {
        1: 240, 2: 240, 3: 240, 4: 210, 5: 180, 6: 210, 7: 210, 8: 300, 9: 270, 10: 180,
        11: 270, 12: 180, 13: 120, 14: 210, 15: 270, 16: 210
    },

    // 46. 고린도전서 (16장)
    46: {
        1: 240, 2: 150, 3: 210, 4: 180, 5: 120, 6: 180, 7: 300, 8: 120, 9: 210, 10: 270,
        11: 270, 12: 240, 13: 120, 14: 300, 15: 390, 16: 210
    },

    // 47. 고린도후서 (13장)
    47: {
        1: 210, 2: 150, 3: 150, 4: 150, 5: 180, 6: 150, 7: 150, 8: 210, 9: 120, 10: 150,
        11: 270, 12: 180, 13: 120
    },

    // 48. 갈라디아서 (6장)
    48: { 1: 210, 2: 180, 3: 240, 4: 240, 5: 210, 6: 150 },

    // 49. 에베소서 (6장)
    49: { 1: 210, 2: 180, 3: 180, 4: 240, 5: 270, 6: 210 },

    // 50. 빌립보서 (4장)
    50: { 1: 240, 2: 240, 3: 180, 4: 210 },

    // 51. 골로새서 (4장)
    51: { 1: 240, 2: 210, 3: 210, 4: 150 },

    // 52. 데살로니가전서 (5장)
    52: { 1: 90, 2: 180, 3: 120, 4: 150, 5: 240 },

    // 53. 데살로니가후서 (3장)
    53: { 1: 120, 2: 150, 3: 150 },

    // 54. 디모데전서 (6장)
    54: { 1: 180, 2: 120, 3: 150, 4: 150, 5: 210, 6: 180 },

    // 55. 디모데후서 (4장)
    55: { 1: 150, 2: 210, 3: 150, 4: 180 },

    // 56. 디도서 (3장)
    56: { 1: 150, 2: 120, 3: 120 },

    // 57. 빌레몬서 (1장)
    57: { 1: 210 },

    // 58. 히브리서 (13장)
    58: {
        1: 150, 2: 210, 3: 210, 4: 180, 5: 150, 6: 240, 7: 330, 8: 150, 9: 330, 10: 450,
        11: 480, 12: 330, 13: 300
    },

    // 59. 야고보서 (5장)
    59: { 1: 330, 2: 300, 3: 210, 4: 210, 5: 240 },

    // 60. 베드로전서 (5장)
    60: { 1: 300, 2: 300, 3: 270, 4: 210, 5: 150 },

    // 61. 베드로후서 (3장)
    61: { 1: 240, 2: 240, 3: 210 },

    // 62. 요한일서 (5장)
    62: { 1: 120, 2: 330, 3: 270, 4: 240, 5: 240 },

    // 63. 요한이서 (1장)
    63: { 1: 150 },

    // 64. 요한삼서 (1장)
    64: { 1: 180 },

    // 65. 유다서 (1장)
    65: { 1: 300 },

    // 66. 요한계시록 (22장)
    66: {
        1: 240, 2: 330, 3: 270, 4: 120, 5: 150, 6: 210, 7: 210, 8: 150, 9: 240, 10: 120,
        11: 150, 12: 210, 13: 210, 14: 240, 15: 120, 16: 240, 17: 210, 18: 270, 19: 240, 20: 180,
        21: 330, 22: 240
    }
};

/**
 * 통합된 성경 전체 읽기 시간 데이터
 */
const ALL_BIBLE_READING_TIMES = {
    ...OLD_TESTAMENT_READING_TIMES,
    ...NEW_TESTAMENT_READING_TIMES
};

/**
 * 특정 성경책의 특정 장 읽기 시간 반환 (초 단위)
 */
export const getChapterReadingTime = (book: number, chapter: number): number => {
    const bookData = ALL_BIBLE_READING_TIMES[book];
    if (bookData && bookData[chapter]) {
        return bookData[chapter];
    }

    // fallback: 기본 추정치 (초 단위)
    if (book === 19) return 150;      // 시편
    if (book === 20) return 210;      // 잠언
    if (book <= 39) return 240;       // 구약
    return 252;                       // 신약
};

/**
 * 특정 성경책의 전체 읽기 시간 계산 (초 단위)
 */
export const getBookTotalTime = (book: number): number => {
    const bookData = ALL_BIBLE_READING_TIMES[book];
    if (!bookData) return 0;

    return Object.values(bookData).reduce((total, time) => total + time, 0);
};

/**
 * 성경 계획별 총 읽기 시간 계산 (초 단위)
 */
export const calculatePlanTotalTime = (planType: string): number => {
    let startBook = 1;
    let endBook = 66;

    switch (planType) {
        case 'old_testament':
            startBook = 1;
            endBook = 39;
            break;
        case 'new_testament':
            startBook = 40;
            endBook = 66;
            break;
        case 'pentateuch':
            startBook = 1;
            endBook = 5;
            break;
        case 'psalms':
            startBook = 19;
            endBook = 19;
            break;
        case 'full_bible':
        default:
            startBook = 1;
            endBook = 66;
            break;
    }

    let totalTime = 0;
    for (let book = startBook; book <= endBook; book++) {
        totalTime += getBookTotalTime(book);
    }

    return totalTime;
};

/**
 * 성경 계획별 총 장수 계산
 */
export const calculatePlanTotalChapters = (planType: string): number => {
    let startBook = 1;
    let endBook = 66;

    switch (planType) {
        case 'old_testament':
            startBook = 1;
            endBook = 39;
            break;
        case 'new_testament':
            startBook = 40;
            endBook = 66;
            break;
        case 'pentateuch':
            startBook = 1;
            endBook = 5;
            break;
        case 'psalms':
            startBook = 19;
            endBook = 19;
            break;
        case 'full_bible':
        default:
            startBook = 1;
            endBook = 66;
            break;
    }

    let totalChapters = 0;
    for (let book = startBook; book <= endBook; book++) {
        const bookData = ALL_BIBLE_READING_TIMES[book];
        if (bookData) {
            totalChapters += Object.keys(bookData).length;
        }
    }

    return totalChapters;
};

/**
 * 읽기 시간을 포맷팅 (초 -> "X시간 Y분" 형식)
 */
export const formatReadingTime = (seconds: number): string => {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const remainingSeconds = seconds % 60;

    if (hours > 0) {
        if (remainingSeconds > 0) {
            return `${hours}시간 ${minutes}분 ${remainingSeconds}초`;
        }
        return `${hours}시간 ${minutes}분`;
    } else if (minutes > 0) {
        if (remainingSeconds > 0) {
            return `${minutes}분 ${remainingSeconds}초`;
        }
        return `${minutes}분`;
    } else {
        return `${seconds}초`;
    }
};

/**
 * 일일 평균 읽기 시간 계산 (초 단위)
 */
export const calculateDailyReadingTime = (planType: string, days: number): number => {
    const totalTime = calculatePlanTotalTime(planType);
    return Math.ceil(totalTime / days);
};

/**
 * 시간 기반으로 하루 읽을 장수 계산 (정확한 시간 적용) - 수정된 버전
 */
export const calculateChaptersFromTimeGoal = (
    planType: string,
    targetMinutesPerDay: number
): number => {
    const totalTimeSeconds = calculatePlanTotalTime(planType);
    const totalTimeMinutes = totalTimeSeconds / 60;  // 초를 분으로 변환
    const totalChapters = calculatePlanTotalChapters(planType);

    if (totalChapters === 0) {
        return Math.max(1, Math.round(targetMinutesPerDay / 4));
    }

    const avgMinutesPerChapter = totalTimeMinutes / totalChapters;
    const chaptersForTargetTime = targetMinutesPerDay / avgMinutesPerChapter;

    // 올림 처리하여 반환
    return Math.max(1, Math.ceil(chaptersForTargetTime));
};

/**
 * 최적화된 일독 계획 생성 (모든 성경에 적용) - 수정된 버전
 */
export const createOptimizedBiblePlan = (
    planType: string,
    startDate: string,
    endDate: string,
    targetDays?: number
): any => {
    const start = new Date(startDate);
    const end = new Date(endDate);
    const totalDays = targetDays || Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;

    const totalTimeSeconds = calculatePlanTotalTime(planType);
    const totalTimeMinutes = totalTimeSeconds / 60;  // 초를 분으로 변환
    const totalChapters = calculatePlanTotalChapters(planType);
    const recommendedTimePerDay = Math.round((totalTimeMinutes / totalDays) * 10) / 10;

    // 정확한 하루 평균 장수 계산
    const chaptersPerDayExact = totalChapters / totalDays;
    const chaptersPerDay = Math.ceil(chaptersPerDayExact);  // 올림 처리

    const planNames: { [key: string]: string } = {
        'full_bible': '성경',
        'old_testament': '구약',
        'new_testament': '신약',
        'pentateuch': '모세오경',
        'psalms': '시편'
    };

    return {
        planType,
        planName: planNames[planType] || '성경',
        startDate,
        endDate,
        totalDays,
        totalChapters,

        // 정확한 계산값
        chaptersPerDay,  // 올림된 값
        chaptersPerDayExact,  // 정확한 소수점 값
        calculatedMinutesPerDay: recommendedTimePerDay,

        // 실제 시간 데이터
        totalMinutes: Math.round(totalTimeMinutes),
        totalSeconds: totalTimeSeconds,

        isTimeBasedCalculation: true,
        currentDay: 1,
        readChapters: [],
        createdAt: new Date().toISOString(),
        version: '3.0_complete_bible_optimized'
    };
};

/**
 * 성경책 이름과 인덱스 매핑
 */
export const BIBLE_BOOK_MAPPING: { [key: string]: number } = {
    'Gen': 1, 'Exo': 2, 'Lev': 3, 'Num': 4, 'Deu': 5, 'Jos': 6, 'Jdg': 7, 'Rut': 8,
    '1Sa': 9, '2Sa': 10, '1Ki': 11, '2Ki': 12, '1Ch': 13, '2Ch': 14, 'Ezr': 15, 'Neh': 16,
    'Est': 17, 'Job': 18, 'Psa': 19, 'Pro': 20, 'Ecc': 21, 'Son': 22, 'Isa': 23, 'Jer': 24,
    'Lam': 25, 'Eze': 26, 'Dan': 27, 'Hos': 28, 'Joe': 29, 'Amo': 30, 'Oba': 31, 'Jon': 32,
    'Mic': 33, 'Nah': 34, 'Hab': 35, 'Zep': 36, 'Hag': 37, 'Zec': 38, 'Mal': 39,
    'Mat': 40, 'Mar': 41, 'Luk': 42, 'Joh': 43, 'Act': 44, 'Rom': 45, '1Co': 46, '2Co': 47,
    'Gal': 48, 'Eph': 49, 'Phi': 50, 'Col': 51, '1Th': 52, '2Th': 53, '1Ti': 54, '2Ti': 55,
    'Tit': 56, 'Phm': 57, 'Heb': 58, 'Jam': 59, '1Pe': 60, '2Pe': 61, '1Jo': 62, '2Jo': 63,
    '3Jo': 64, 'Jud': 65, 'Rev': 66
};

/**
 * 성경책 한국어 이름 매핑
 */
export const BIBLE_BOOK_KOREAN_NAMES: { [key: number]: string } = {
    1: '창세기', 2: '출애굽기', 3: '레위기', 4: '민수기', 5: '신명기', 6: '여호수아', 7: '사사기', 8: '룻기',
    9: '사무엘상', 10: '사무엘하', 11: '열왕기상', 12: '열왕기하', 13: '역대기상', 14: '역대기하', 15: '에스라', 16: '느헤미야',
    17: '에스더', 18: '욥기', 19: '시편', 20: '잠언', 21: '전도서', 22: '아가', 23: '이사야', 24: '예레미야',
    25: '예레미야 애가', 26: '에스겔', 27: '다니엘', 28: '호세아', 29: '요엘', 30: '아모스', 31: '오바댜', 32: '요나',
    33: '미가', 34: '나훔', 35: '하박국', 36: '스바냐', 37: '학개', 38: '스가랴', 39: '말라기',
    40: '마태복음', 41: '마가복음', 42: '누가복음', 43: '요한복음', 44: '사도행전', 45: '로마서', 46: '고린도전서', 47: '고린도후서',
    48: '갈라디아서', 49: '에베소서', 50: '빌립보서', 51: '골로새서', 52: '데살로니가전서', 53: '데살로니가후서', 54: '디모데전서', 55: '디모데후서',
    56: '디도서', 57: '빌레몬서', 58: '히브리서', 59: '야고보서', 60: '베드로전서', 61: '베드로후서', 62: '요한일서', 63: '요한이서',
    64: '요한삼서', 65: '유다서', 66: '요한계시록'
};

export default ALL_BIBLE_READING_TIMES;